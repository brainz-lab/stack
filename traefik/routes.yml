# Traefik dynamic configuration - routes
# Domain hosts are configured via environment variables in docker-compose.yml
# Default: recall.localhost, reflex.localhost, pulse.localhost
# Production: recall.yourdomain.com, reflex.yourdomain.com, pulse.yourdomain.com
http:
  routers:
    recall:
      rule: "Host(`{{ env "RECALL_HOST" }}`)"
      service: recall
      entryPoints:
        - web

    reflex:
      rule: "Host(`{{ env "REFLEX_HOST" }}`)"
      service: reflex
      entryPoints:
        - web

    pulse:
      rule: "Host(`{{ env "PULSE_HOST" }}`)"
      service: pulse
      entryPoints:
        - web

  services:
    recall:
      loadBalancer:
        servers:
          - url: "http://recall:3000"

    reflex:
      loadBalancer:
        servers:
          - url: "http://reflex:3000"

    pulse:
      loadBalancer:
        servers:
          - url: "http://pulse:3000"
